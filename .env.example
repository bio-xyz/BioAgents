# ============================================================================
# Authentication
# ============================================================================
# Shared secret for API authentication (JWT signing/verification and API key)
# Generate with: openssl rand -hex 32
BIOAGENTS_SECRET=change-me-to-a-secure-random-string

# Authentication mode: 'none' or 'jwt'
# - none: No auth required (development only)
# - jwt: Require JWT tokens signed with BIOAGENTS_SECRET (production)
# Note: x402 payments are controlled separately via X402_ENABLED flag
AUTH_MODE=none

# Maximum JWT expiration time in seconds (default: 3600 = 1 hour)
# Tokens with longer expiration will be rejected
MAX_JWT_EXPIRATION=3600

OPENAI_API_KEY=
OPENSCHOLAR_API_URL=
PRIMARY_LITERATURE_AGENT=
BIO_LIT_AGENT_API_URL=
BIO_LIT_AGENT_API_KEY=
REPLY_LLM_PROVIDER=openai
REPLY_LLM_MODEL=gpt-5

HYP_LLM_PROVIDER=openai
HYP_LLM_MODEL=gpt-5

PLANNING_LLM_PROVIDER=openai
PLANNING_LLM_MODEL=gpt-5

STRUCTURED_LLM_PROVIDER=openai
STRUCTURED_LLM_MODEL=gpt-5


GOOGLE_API_KEY=
ANTHROPIC_API_KEY=
OPENROUTER_API_KEY=

PORT=3000


SUPABASE_ANON_KEY=
SUPABASE_URL=

EMBEDDING_PROVIDER=openai
TEXT_EMBEDDING_MODEL=text-embedding-3-large
COHERE_API_KEY=

CHUNK_SIZE=2000
CHUNK_OVERLAP=200
VECTOR_SEARCH_LIMIT=20
RERANK_FINAL_LIMIT=5
USE_RERANKING=true
KNOWLEDGE_DOCS_PATH=docs
SIMILARITY_THRESHOLD=0.75
RERANKER_SCORE_THRESHOLD=0.3
# Optional: Password to protect the development UI
# Leave empty or remove this line to disable authentication
# UI_PASSWORD=your_secure_password_here

# ============================================================================
# SEO Configuration (Optional)
# ============================================================================
# Configure the page title, description, favicon, and OG image
# Leave empty to use defaults
SEO_TITLE=
SEO_DESCRIPTION=
FAVICON_URL=
OG_IMAGE_URL=

# ============================================================================
# Data Analysis Agent Configuration (Optional, tool can be enabled/disabled in code)
# PRIMARY_ANALYSIS_AGENT options:
# - 'edison' or empty: Use Edison Data Analysis Agent (default) 
# - 'bio': Use BioAgents Data Analysis Agent, if selected, DATA_ANALYSIS_API_URL and DATA_ANALYSIS_API_KEY must be set
# ============================================================================
PRIMARY_ANALYSIS_AGENT=
DATA_ANALYSIS_API_URL=https://path-to-bio-data-analysis-service
DATA_ANALYSIS_API_KEY=service-secret-api-key

# ============================================================================
# JWT Authentication (for external frontends)
# ============================================================================
# When AUTH_MODE=jwt, external frontends sign JWTs with BIOAGENTS_SECRET
# JWT payload must include 'sub' claim with a valid UUID (user ID)
# See docs/JWT_AUTH_GUIDE.md for integration details

# ===========================================================================
# Storage Configuration (Optional)
# ===========================================================================
# Available options: 's3' (it empty or not set, storage is disabled)
STORAGE_PROVIDER=

# Use either the AWS_* or S3_* variants (not both strictly required).
# Primary, required (AWS-style) variables:
AWS_ACCESS_KEY_ID=your_aws_access_key_id_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key_here
AWS_REGION=us-east-1

# Optional alternative (S3-specific) variables:
# S3_ACCESS_KEY_ID=your_s3_access_key_id_here
# S3_SECRET_ACCESS_KEY=your_s3_secret_access_key_here
# S3_REGION=us-east-1

# Required: target bucket
S3_BUCKET=your-bucket-name-here

# Optional: custom S3 endpoint (for MinIO, DO Spaces, etc.)
# Example: https://nyc3.digitaloceanspaces.com
S3_ENDPOINT=


# ============================================================================
# x402 Payment Protocol Configuration
# ============================================================================
# Enable/disable x402 USDC micropayments for API access
# Set AUTH_MODE=x402 to use payment-based authentication
X402_ENABLED=false

# Environment: 'testnet' for development, 'mainnet' for production
X402_ENVIRONMENT=testnet

# Your wallet address to receive payments
# For testnet: Your Base Sepolia wallet address (0x...)
# For mainnet: Your Base mainnet wallet address (0x...)
X402_PAYMENT_ADDRESS=

# Public facilitator for processing x402 payments (testnet only)
# Testnet: Uses x402.org facilitator (no auth required)
# Mainnet: Uses CDP facilitator (CDP_API_KEY_ID/SECRET required, facilitator URL ignored)
X402_FACILITATOR_URL=https://x402.org/facilitator

# Network configuration (auto-configured based on X402_ENVIRONMENT)
# For testnet: base-sepolia
# For mainnet: base
X402_NETWORK=base-sepolia

# Payment asset (currently only USDC is supported)
X402_ASSET=USDC

# USDC contract address (auto-configured based on X402_ENVIRONMENT)
# Base Sepolia: 0x036CbD53842c5426634e7929541eC2318f3dCF7e
# Base Mainnet: 0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
X402_USDC_ADDRESS=0x036CbD53842c5426634e7929541eC2318f3dCF7e

# Payment timeout in seconds
X402_TIMEOUT=30

# Coinbase Developer Platform API credentials
# Get your API key from: https://portal.cdp.coinbase.com/access/api
CDP_API_KEY_ID=
CDP_API_KEY_SECRET=

# Coinbase Developer Platform Project ID for embedded wallets
# Get your project ID from: https://portal.cdp.coinbase.com/projects
CDP_PROJECT_ID=

# Edison API setup
EDISON_API_URL=
EDISON_API_KEY=

# ============================================================================
# b402 Payment Protocol Configuration (BNB Chain)
# ============================================================================
# Enable/disable b402 USDT micropayments for API access on BNB Chain
B402_ENABLED=false

# Environment: 'testnet' for development, 'mainnet' for production
B402_ENVIRONMENT=testnet

# Your wallet address to receive payments on BNB Chain
# For testnet: Your BNB Testnet wallet address (0x...)
# For mainnet: Your BNB mainnet wallet address (0x...)
B402_PAYMENT_ADDRESS=

# Facilitator URL for processing b402 payments
# Local development: http://localhost:8080
# Production (when deployed): https://facilitator.b402.ai
B402_FACILITATOR_URL=http://localhost:8080

# Network configuration (auto-configured based on B402_ENVIRONMENT)
# For testnet: bnb-testnet
# For mainnet: bnb
B402_NETWORK=bnb-testnet

# Payment asset (currently only USDT is supported on BNB Chain)
B402_ASSET=USDT

# USDT contract address (auto-configured based on B402_ENVIRONMENT)
# BNB Testnet: 0x337610d27c682E347C9cD60BD4b3b107C9d34dDd
# BNB Mainnet: 0x55d398326f99059fF775485246999027B3197955
B402_USDT_ADDRESS=0x337610d27c682E347C9cD60BD4b3b107C9d34dDd

# Payment timeout in seconds
B402_TIMEOUT=30

# ============================================================================
# BullMQ Job Queue Configuration
# ============================================================================
# Enable/disable job queue (false = in-process execution, true = BullMQ queue)
# Set to false for local development without Redis
USE_JOB_QUEUE=false

# Redis connection for BullMQ job queue
# Required when USE_JOB_QUEUE=true
REDIS_URL=redis://localhost:6379

# Alternative Redis configuration (used if REDIS_URL not set)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=

# Queue concurrency settings
CHAT_QUEUE_CONCURRENCY=5
DEEP_RESEARCH_QUEUE_CONCURRENCY=3

# Rate limiting (per user)
CHAT_RATE_LIMIT_PER_MINUTE=10
DEEP_RESEARCH_RATE_LIMIT_PER_5MIN=3
